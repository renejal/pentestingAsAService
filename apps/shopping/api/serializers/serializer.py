from django.db.models import fields
from apps.pentesting.models import Attack, Package
from rest_framework import serializers
from apps.shopping.models import Invoce, Service, ShoppinCart
class ServiceSerializer(serializers.ModelSerializer):
    class Meta:
       
        model = Service
        fields = '__all__'

class ShoppingCartSerializers(serializers.ModelSerializer):
    class Meta:
        model = ShoppinCart
        exclude = ('create_date','modified_date','deleted_date','state')
    
    def to_representation(self, instance):
        service =instance.services.attack
        if not service:
            service=instance.services.package
        return{
            'id':instance.id,
            'user':instance.users.id,
            'service':service.name,
            'price':service.price,
        }
   
class ShoopingCartAddSerializers(serializers.ModelSerializer):
    class Meta:
        model = ShoppinCart
        exclude = ('create_date','modified_date','deleted_date','state')     

class InvoceSerializers(serializers.ModelSerializer):
    class Meta:
        model = Invoce
        exclude = ('state',)